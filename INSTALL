/*
 * Polylib - Polygon Management Library
 *
 * Copyright (c) 2010-2011 VCAD System Research Program, RIKEN. 
 * All rights reserved.
 * 
 * Copyright (c) 2012-2013 Advanced Institute for Computational Science, RIKEN.
 * All rights reserved.
 *
 */


Prerequisite
============
- MPI library
- Text parsing library



How to compile
==============

1. with configure

$ ./configure [options]
$ make
# make install


Generated archives are;
   libPOLY.a    : serial version
   libMPIPOLY.a : MPI version



Configure options:

 --prefix=INSTALL_DIR
    Specify a directory to be installed. The default directory is /usr/local/Polylib.

 --with-mpich=MPICH_DIR
    If you will use the MPICH library, specify the directory that MPICH library is installed.
    Either --with-mpich or --with-ompi option will be required except using a wrapper compiler.
    If the wrapper compiler, e.g., mpic++ or mpicxx is used to compile, both options can be 
    eliminated.

 --with-ompi=OPENMPI_DIR
    If the OpenMPI library is used, specify the directory path.

 --with-parser=TEXTPARSER_PATH
    Specify the directory path that is installed TextParser library.

 --with-example=(yes|no)
    Specify building example. The default is 'yes'.

 --host=hostname
    Specify in case of cross-compilation.



 CXX=CXX_COMPILER
    Specify a C++ compiler, e.g., g++, icpc, xlc++ or others.

 CXXFLAGS=CXX_OPTIONS
    Specify compiler options.



Here is some examples;


##
 Intel compiler and MPICH
##

$.configure --prefix=/usr/local/Polylib \
            --with-mpich=/usr/local/mpich \
            --with-parser=/usr/local/TextParser \
            CXX=/opt/intel/composerxe/bin/icpc \
            CXXFLAGS="-O3 -Wall -fno-strict-aliasing"


##
 OpenMPI with wrapper compiler
##

$.configure --with-parser=/usr/local/TextParser \
            CXX=mpicxx \
            CXXFLAGS="-O3 -Wall -fno-strict-aliasing"


##
 K-computer
##

$./configure --prefix=$1 \
             --with-parser=/usr/local/TextParser \
             --host=sparc64-unknown-linux-gnu \
             CXX=mpiFCCpx \
             CXXFLAGS="-Kfast,ocl,preex,simd=2,uxsimd,array_private,parallel,openmp,optmsg=2"




2. Hand compile

If a provided configure does not work, use Makefile_hand to build this library. At first,
edit MACRO to tell your machine environment.




########################
# BG/P
########################

AR          = ar crv
RANLIB      = ranlib
RM          = \rm -f
MPI_DIR     = /bgsys/drivers/ppcfloor/comm
TP_DIR      = /usr/local/TextParser
OMP_FLAGS   =
CXX         = mpixlcxx_r
CXXFLAGS    = -O3 -qarch=450d -qtune=450 $(OMP_FLAGS)
UDEF_INC_PATH = -I$(TP_DIR)/include -I$(MPI_DIR)/include
UDEF_LIB_PATH_SPEC = -L/soft/apps/ibmcmp/xlf/bg/11.1/bglib
UDEF_LIBS_SPEC     = -lxlopt -lxl -lxlf90 -lxlfmath

